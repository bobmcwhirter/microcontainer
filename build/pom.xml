<?xml version="1.0" encoding="UTF-8"?>
<!--
  The parent maven for the microcontainer project that expects a structure like: 
    build/pom.xml
    aop-mc-int/pom.xml
    container/pom.xml
    dependency/pom.xml
    deployers/pom.xml
    kernel/pom.xml
    managed/pom.xml
    metatype/pom.xml
    spring-int/pom.xml

  This pom aggregates the subproject pom, and it also functions as a default configuration.  The subproject
  poms each inherit configuration from this one.
  
  To build this project maven 2 should be installed and in the system path.  From the command line
  run "mvn" from the build directory and "install" will be used as the default goal.  In order to use 
  the "deploy" goal, the mvn.cvs.root should be specified in settings.xml.
-->
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <parent>
    <groupId>jboss</groupId>
    <artifactId>jboss-parent</artifactId>
    <version>1</version>
  </parent>
  <modelVersion>4.0.0</modelVersion>
  <artifactId>jboss-microcontainer</artifactId>
  <version>2.0.0-SNAPSHOT</version>
  <packaging>pom</packaging>
  <name>JBoss Microcontainer Build</name>
  <url>http://www.jboss.com/products/jbossmc</url>
  <description>
    The JBoss Microcontainer provides a lightweight container for managing POJOs, their deployment 
    and configuration.
  </description>
  <build>
    <sourceDirectory>src/main</sourceDirectory>
	  <testSourceDirectory>src/tests</testSourceDirectory>
    <finalName>${artifactId}</finalName>
    <resources>
      <resource>
        <directory>src</directory>
        <includes>
          <include>etc/**</include>
        </includes>
        <filtering>true</filtering>
      </resource>
    </resources>
    <testResources>
      <testResource>
        <directory>src</directory>
        <includes>
          <include>resources/**</include>
        </includes>
        <filtering>true</filtering>
      </testResource>
    </testResources>
    <plugins>
      <plugin>
        <artifactId>maven-surefire-plugin</artifactId>
        <configuration>
          <testFailureIgnore>true</testFailureIgnore>
          <includes>
            <include>**/*TestCase.java</include>
          </includes>
        </configuration>
      </plugin>    
      <plugin>
        <groupId>jboss.maven-plugins</groupId>
        <artifactId>jboss-retro-maven-plugin</artifactId>
        <version>0.5-beta</version>
        <executions>
          <execution>
            <goals>
              <goal>retro-compile</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <groupId>jboss.maven-plugins</groupId>
        <artifactId>jboss-deploy-maven-plugin</artifactId>
        <version>1.1-beta</version>
        <executions>
          <execution>
            <goals>
              <goal>jboss-deploy</goal>
            </goals>
          </execution>
        </executions>
        <configuration>
          <jbossDeployRoot>${jboss.repository.root}</jbossDeployRoot>
        </configuration>
      </plugin>
    </plugins>
  </build>
  <repositories>
    <repository>
      <id>jboss</id>
      <name>JBoss Repository</name>
      <layout>default</layout>
      <url>http://repository.jboss.com/maven2/</url>
      <snapshots>
        <enabled>true</enabled>
      </snapshots>
    </repository>
  </repositories>
  <modules>
    <module>../container</module>
    <module>../dependency</module>
    <module>../metatype</module>
    <module>../kernel</module>
    <module>../managed</module>
    <module>../aop-mc-int</module>
    <module>../deployers</module>
    <module>../spring-int</module>
  </modules>
  <reporting>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-project-info-reports-plugin</artifactId>
        <reportSets>
          <reportSet>
            <reports>
              <report>dependencies</report>
              <report>issue-tracking</report>
              <report>license</report>
              <report>scm</report>
            </reports>
          </reportSet>
        </reportSets>
      </plugin>
    </plugins>
  </reporting>
  <dependencyManagement>
    <!-- The parent pom manages the inter-dependencies of the modules. -->
    <dependencies>
      <dependency>
        <groupId>jboss</groupId>
        <artifactId>jboss-aop-mc-int</artifactId>
        <version>${project.version}</version>
      </dependency>
      <dependency>
        <groupId>jboss</groupId>
        <artifactId>jboss-container</artifactId>
        <version>${project.version}</version>
      </dependency>
      <dependency>
        <groupId>jboss</groupId>
        <artifactId>jboss-container</artifactId>
        <version>${project.version}</version>
        <type>test-jar</type>
        <scope>test</scope>
      </dependency>
      <dependency>
        <groupId>jboss</groupId>
        <artifactId>jboss-dependency</artifactId>
        <version>${project.version}</version>
      </dependency>
      <dependency>
        <groupId>jboss</groupId>
        <artifactId>jboss-deployers</artifactId>
        <version>${project.version}</version>
      </dependency>
      <dependency>
        <groupId>jboss</groupId>
        <artifactId>jboss-kernel</artifactId>
        <version>${project.version}</version>
      </dependency>
      <dependency>
        <groupId>jboss</groupId>
        <artifactId>jboss-kernel</artifactId>
        <version>${project.version}</version>
        <type>test-jar</type>
        <scope>test</scope>
      </dependency>
      <dependency>
        <groupId>jboss</groupId>
        <artifactId>jboss-managed</artifactId>
        <version>${project.version}</version>
      </dependency>
      <dependency>
        <groupId>jboss</groupId>
        <artifactId>jboss-metatype</artifactId>
        <version>${project.version}</version>
      </dependency>
      <dependency>
        <groupId>jboss</groupId>
        <artifactId>jboss-spring-int</artifactId>
        <version>${project.version}</version>
      </dependency>
    </dependencies>
  </dependencyManagement>
</project>
